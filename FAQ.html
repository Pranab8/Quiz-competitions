<b:if cond='data:view.isSingleItem'>
<script>
document.addEventListener("DOMContentLoaded", function () {
  var faqData = {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": []
  };

  var blocks = document.querySelectorAll(".question-block");
  blocks.forEach(function(block, i) {
    var qText = block.querySelector("strong") ? block.querySelector("strong").innerText.trim() : "";
    var aText = block.querySelector(".pnl") ? block.querySelector(".pnl").innerText.trim() : "";

    if (qText && aText) {
      faqData.mainEntity.push({
        "@type": "Question",
        "@id": "post-" + window.location.pathname + "-q" + (i+1),
        "name": qText,
        "acceptedAnswer": {
          "@type": "Answer",
          "text": aText
        }
      });
    }
  });

  if (faqData.mainEntity.length > 0) {
    var script = document.createElement("script");
    script.type = "application/ld+json";
    script.text = JSON.stringify(faqData, null, 2);
    document.body.appendChild(script);
  }
});
</script>
</b:if>
